@page "/rounds"
@using TXM.Core;

<PageTitle>TXM - Rounds</PageTitle>

<button class="btn btn-primary" @onclick="NextRound">
    Next Round
</button>

<br />

<TabControl>
    @resetRoundNo()
        
    @foreach (var rounds in tournamentController.ActiveTournament.Rounds)
        {
              <TabPage Text="@SetTabText()">

                  <Pairings Round="roundNo"/>

              </TabPage>
                }
</TabControl>

@code {
    [CascadingParameter]
    protected TournamentController tournamentController { get; set; }

    private int roundNo = 0;
    private bool cut = false;

    protected override async Task OnInitializedAsync()
    {

    }

    private string resetRoundNo()
    {
        roundNo = 0;
        return "";
    }

    internal string SetTabText()
    {
        roundNo++;
        return "Round " + roundNo;
    }

    private void NextRound()
    {
        if(tournamentController.ActiveTournament.Rounds.Count == 0)
        {
            tournamentController.StartTournament("Test", false);
        }
        tournamentController.NewRound(cut);
        StateHasChanged();
    }
}

